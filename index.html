<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8 Weken Core Schema</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --success: #10b981;
            --radius: 12px;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* Header */
        header {
            margin-bottom: 30px;
            text-align: center;
        }
        h1 { margin: 0; font-size: 1.5rem; color: var(--text); }
        .subtitle { color: var(--text-light); font-size: 0.9rem; margin-top: 5px; }

        /* Progress Bar */
        .progress-container {
            background: #e2e8f0;
            border-radius: 99px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-bar {
            background: var(--primary);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Navigation */
        .week-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--card-bg);
            padding: 10px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        .nav-btn {
            background: transparent;
            border: none;
            color: var(--primary);
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
        }
        .nav-btn:disabled { color: var(--text-light); cursor: not-allowed; }
        .current-week { font-weight: 700; font-size: 1.1rem; }

        .day-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .day-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #e2e8f0;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.2s;
        }
        .day-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        /* Exercise Card */
        .exercise-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border-left: 5px solid transparent;
            transition: transform 0.1s;
        }
        
        .exercise-card.completed {
            border-left-color: var(--success);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .ex-name { font-weight: 700; font-size: 1.1rem; }
        .ex-muscle { font-size: 0.8rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px; }

        .card-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .target-box {
            background: #f1f5f9;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        .label { font-size: 0.75rem; color: var(--text-light); display: block; margin-bottom: 4px; }
        .value { font-weight: 700; font-size: 1.2rem; color: var(--primary); }

        .input-group {
            position: relative;
        }
        .log-input {
            width: 100%;
            padding: 10px;
            font-size: 1.1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            box-sizing: border-box;
        }
        .log-input:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* Reset Data */
        .footer-actions {
            margin-top: 40px;
            text-align: center;
        }
        .reset-btn {
            color: #ef4444;
            background: none;
            border: none;
            font-size: 0.8rem;
            cursor: pointer;
            text-decoration: underline;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Buikspier Schema</h1>
        <div class="subtitle">8 Weken • Lichaamsgewicht • Progressief</div>
        <div class="progress-container">
            <div class="progress-bar" id="totalProgress"></div>
        </div>
    </header>

    <div class="week-nav">
        <button class="nav-btn" id="prevWeek" onclick="changeWeek(-1)">←</button>
        <span class="current-week" id="weekDisplay">Week 1</span>
        <button class="nav-btn" id="nextWeek" onclick="changeWeek(1)">→</button>
    </div>

    <div class="day-tabs">
        <button class="day-tab active" onclick="setDay(1)">Dag 1</button>
        <button class="day-tab" onclick="setDay(2)">Dag 2</button>
        <button class="day-tab" onclick="setDay(3)">Dag 3</button>
    </div>

    <div id="workoutContainer">
        </div>

    <div class="footer-actions">
        <button class="reset-btn" onclick="resetData()">Wis alle voortgang & start opnieuw</button>
    </div>
</div>

<script>
    // --- CONFIGURATIE ---
    // Hier definiëren we de progressie voor 8 weken.
    // De getallen stijgen elke week (Progressive Overload).
    
    const exercises = [
        { id: 'plank', name: 'De Plank', unit: 'sec', muscle: 'Core Stabiliteit' },
        { id: 'bicycle', name: 'Bicycle Crunches', unit: 'reps (totaal)', muscle: 'Schuine Buik' },
        { id: 'legraise', name: 'Lying Leg Raises', unit: 'reps', muscle: 'Onderbuik' },
        { id: 'mountain', name: 'Mountain Climbers', unit: 'sec', muscle: 'Conditie & Core' },
        { id: 'twists', name: 'Russian Twists', unit: 'reps (totaal)', muscle: 'Schuine Buik' }
    ];

    // Het schema per week. 
    // Format: [Plank, Bicycle, LegRaise, Mountain, Twists]
    const weeklyTargets = {
        1: [30, 20, 10, 30, 20],
        2: [35, 24, 12, 30, 24],
        3: [40, 30, 14, 35, 30],
        4: [45, 36, 15, 40, 36], // Einde fase 1
        5: [50, 40, 15, 45, 40], // Start fase 2 (intensiever)
        6: [60, 44, 18, 50, 44],
        7: [75, 50, 20, 60, 50],
        8: [90, 60, 20, 60, 60]
    };

    // --- STATE MANAGEMENT ---
    let currentWeek = 1;
    let currentDay = 1;
    let userHistory = {}; // Opslag structuur: { "w1-d1-plank": "35", ... }

    // Bij opstarten
    window.onload = function() {
        loadData();
        render();
    };

    function loadData() {
        const saved = localStorage.getItem('abs_tracker_v1');
        if (saved) {
            userHistory = JSON.parse(saved);
        }
        // Check of we ergens gebleven waren (optioneel, nu gewoon default week 1)
    }

    function saveData() {
        localStorage.setItem('abs_tracker_v1', JSON.stringify(userHistory));
        updateProgress();
    }

    // --- LOGICA ---

    function changeWeek(direction) {
        if ((currentWeek === 1 && direction === -1) || (currentWeek === 8 && direction === 1)) return;
        currentWeek += direction;
        render();
    }

    function setDay(day) {
        currentDay = day;
        // Update tabs styling
        document.querySelectorAll('.day-tab').forEach((btn, index) => {
            btn.classList.toggle('active', index + 1 === day);
        });
        render();
    }

    function getInputValue(exId) {
        const key = `w${currentWeek}-d${currentDay}-${exId}`;
        return userHistory[key] || '';
    }

    function handleInput(exId, value) {
        const key = `w${currentWeek}-d${currentDay}-${exId}`;
        if (value === '') {
            delete userHistory[key];
        } else {
            userHistory[key] = value;
        }
        saveData();
        
        // Visuele feedback direct updaten
        const card = document.getElementById(`card-${exId}`);
        if(value) {
            card.classList.add('completed');
        } else {
            card.classList.remove('completed');
        }
    }

    function updateProgress() {
        // Simpele progressie balk: hoeveel velden zijn ingevuld vs totaal aantal velden
        const totalSlots = 8 * 3 * 5; // 8 weken, 3 dagen, 5 oefeningen
        const filledSlots = Object.keys(userHistory).length;
        const percentage = Math.min(100, (filledSlots / totalSlots) * 100);
        document.getElementById('totalProgress').style.width = percentage + '%';
    }

    function resetData() {
        if(confirm("Weet je zeker dat je alle geschiedenis wilt wissen?")) {
            localStorage.removeItem('abs_tracker_v1');
            userHistory = {};
            currentWeek = 1;
            currentDay = 1;
            render();
        }
    }

    // --- RENDERING ---

    function render() {
        // Update header info
        document.getElementById('weekDisplay').textContent = `Week ${currentWeek} van 8`;
        document.getElementById('prevWeek').disabled = currentWeek === 1;
        document.getElementById('nextWeek').disabled = currentWeek === 8;

        const container = document.getElementById('workoutContainer');
        container.innerHTML = ''; // Leegmaken

        const targets = weeklyTargets[currentWeek];

        exercises.forEach((ex, index) => {
            const targetVal = targets[index];
            const savedVal = getInputValue(ex.id);
            const isDone = savedVal !== '';

            const html = `
                <div class="exercise-card ${isDone ? 'completed' : ''}" id="card-${ex.id}">
                    <div class="card-header">
                        <div>
                            <div class="ex-name">${ex.name}</div>
                            <div class="ex-muscle">${ex.muscle}</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="target-box">
                            <span class="label">DOEL</span>
                            <span class="value">${targetVal}</span>
                            <span class="label">${ex.unit}</span>
                        </div>
                        <div class="input-group">
                            <span class="label" style="text-align: center;">GEDAAN</span>
                            <input type="number" 
                                class="log-input" 
                                value="${savedVal}" 
                                placeholder="0"
                                oninput="handleInput('${ex.id}', this.value)"
                            >
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });
        
        updateProgress();
    }
</script>

</body>
</html>
