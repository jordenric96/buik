<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Core Trainer Pro V2</title>
            }
        .btn-icon:active { transform: scale(0.95); }

        /* WEEK SELECTOR */
        .week-card {
            background: var(--white);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            text-align: center;
        }

        .week-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .week-title { font-weight: 800; font-size: 1.2rem; }
        .week-focus { font-size: 0.85rem; color: #64748b; margin-top: 2px;}

        /* CHECKBOX VISUALIZER */
        .tracker-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }
        .check-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .check-circle.completed {
            background: var(--success);
            border-color: var(--success);
            transform: scale(1.1);
        }
        .check-label {
            font-size: 0.8rem;
            color: #64748b;
            margin-bottom: 5px;
            display: block;
        }

        /* EXERCISE LIST */
        .preview-box {
            background: var(--white);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .preview-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        .preview-item:last-child { border-bottom: none; }
        
        /* FLOATING START BUTTON */
        .bottom-action-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(to top, var(--light) 80%, rgba(241, 245, 249, 0));
            box-sizing: border-box;
            text-align: center;
            z-index: 100;
        }

        .big-start-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 100%;
            max-width: 500px;
            padding: 18px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: var(--radius);

<style>
    :root {
        /* Nieuwe Cyber Palet */
        --bg-grad: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        --primary-grad: linear-gradient(to right, #00c6ff, #0072ff);
        --success-grad: linear-gradient(to right, #11998e, #38ef7d);
        --warning-grad: linear-gradient(to right, #ff416c, #ff4b2b);
        
        /* Glassmorphism variabelen */
        --glass-bg: rgba(255, 255, 255, 0.08);
        --glass-border: 1px solid rgba(255, 255, 255, 0.15);
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        --blur: blur(12px);

        --text: #ffffff;
        --text-mute: #aab2c8;
        --radius: 20px;
    }

    body {
        font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        /* Vaste achtergrond voor het glass-effect */
        background: var(--bg-grad);
        background-attachment: fixed; 
        color: var(--text);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        overflow-x: hidden;
        overflow-y: auto;
        -webkit-font-smoothing: antialiased;
    }

    /* Globale Glass Utility Class */
    .glass-panel {
        background: var(--glass-bg);
        backdrop-filter: var(--blur);
        -webkit-backdrop-filter: var(--blur);
        border: var(--glass-border);
        box-shadow: var(--glass-shadow);
        border-radius: var(--radius);
    }

    /* --- SCREENS --- */
    .screen {
        display: none;
        flex-direction: column;
        min-height: 100vh;
        padding: 20px;
        padding-bottom: 140px; /* Iets meer ruimte voor de glow knop */
        box-sizing: border-box;
    }

    .screen.active { display: flex; }

    /* --- DASHBOARD --- */
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }
    h1 { font-size: 1.8rem; margin: 0; font-weight: 800; letter-spacing: 1px; }
    
    /* Glass Buttons */
    .btn-icon {
        background: rgba(255, 255, 255, 0.1);
        border: var(--glass-border);
        backdrop-filter: var(--blur);
        color: var(--text);
        border-radius: 50%;
        width: 44px;
        height: 44px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        transition: all 0.2s;
    }
    .btn-icon:active { transform: scale(0.92); background: rgba(255,255,255,0.2); }

    /* WEEK SELECTOR CARD */
    .week-card {
        /* Pas de glass stijl toe */
        background: var(--glass-bg);
        backdrop-filter: var(--blur);
        -webkit-backdrop-filter: var(--blur);
        border: var(--glass-border);
        box-shadow: var(--glass-shadow);
        border-radius: var(--radius);
        
        padding: 25px;
        margin-bottom: 25px;
        text-align: center;
    }

    .week-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .week-title { font-weight: 800; font-size: 1.4rem; }
    .week-focus { font-size: 0.9rem; color: var(--text-mute); margin-top: 5px; text-transform: uppercase; letter-spacing: 1px;}

    /* CHECKBOX VISUALIZER (Neon style) */
    .tracker-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    .check-circle {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: transparent; /* Verberg vinkje indien leeg */
        font-size: 1.4rem;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .check-circle.completed {
        background: var(--success-grad);
        border: none;
        color: #fff; /* Toon vinkje */
        transform: scale(1.15);
        box-shadow: 0 0 25px #38ef7d; /* Neon Glow */
    }
    .check-label {
        font-size: 0.75rem;
        color: var(--text-mute);
        margin-bottom: 5px;
        display: block;
        font-weight: 700;
        letter-spacing: 1px;
    }

    /* PREVIEW BOX */
    .preview-box {
        /* Glass style */
        background: var(--glass-bg);
        backdrop-filter: var(--blur);
        -webkit-backdrop-filter: var(--blur);
        border: var(--glass-border);
        box-shadow: var(--glass-shadow);
        border-radius: var(--radius);

        padding: 25px;
        margin-bottom: 20px;
    }
    .preview-box h3 {
        margin-top: 0; font-size: 1.1rem; 
        border-bottom: 1px solid rgba(255,255,255,0.1); 
        padding-bottom: 15px;
        color: var(--text-mute);
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .preview-item {
        display: flex;
        justify-content: space-between;
        padding: 15px 0;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        font-size: 1.1rem;
    }
    .preview-item:last-child { border-bottom: none; }
    .preview-item span:last-child {
        color: #00c6ff; /* Cyaan kleur voor de aantallen */
        font-weight: 800;
        text-shadow: 0 0 10px rgba(0, 198, 255, 0.4);
    }
    
    /* FLOATING START BUTTON */
    .bottom-action-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 25px;
        /* Donkere fade-out onderaan */
        background: linear-gradient(to top, #0f0c29 70%, rgba(15, 12, 41, 0));
        box-sizing: border-box;
        text-align: center;
        z-index: 100;
    }

    .big-start-btn {
        background: var(--primary-grad);
        color: white;
        border: none;
        width: 100%;
        max-width: 500px;
        padding: 20px;
        font-size: 1.3rem;
        font-weight: 800;
        border-radius: 50px; /* Pill shape */
        cursor: pointer;
        box-shadow: 0 0 30px rgba(0, 198, 255, 0.5); /* Blue Glow */
        transition: transform 0.2s;
        letter-spacing: 1px;
    }
    .big-start-btn:active { transform: scale(0.98); }

    /* --- PLAYER --- */
    #playerScreen {
        /* Donkere overlay over de main background */
        background: rgba(15, 12, 41, 0.85);
        text-align: center;
        justify-content: center;
        align-items: center;
        padding-bottom: 20px;
    }

    #roundDisplay {
        font-weight: 700; letter-spacing: 1px;
        background: rgba(255,255,255,0.1) !important; /* Override inline style */
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255,255,255,0.2);
    }

    .timer-circle {
        width: 240px;
        height: 240px;
        border-radius: 50%;
        /* Standaard border weg, we gebruiken shadow voor glow */
        border: 4px solid rgba(255,255,255,0.1); 
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 40px auto;
        font-size: 5rem;
        font-weight: 900;
        font-variant-numeric: tabular-nums;
        transition: all 0.5s ease;
        text-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }

    .player-instruction { font-size: 1.8rem; font-weight: 800; margin-bottom: 10px; letter-spacing: 1px; }
    .player-detail { font-size: 1.2rem; color: var(--text-mute); text-transform: uppercase; letter-spacing: 2px;}
    
    .action-btn {
        background: var(--success-grad);
        color: white;
        border: none;
        padding: 22px 40px;
        font-size: 1.5rem;
        border-radius: 50px;
        cursor: pointer;
        width: 80%;
        max-width: 320px;
        font-weight: 800;
        box-shadow: 0 0 30px rgba(56, 239, 125, 0.5); /* Green Glow */
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .stop-btn {
        background: transparent;
        color: var(--text-mute);
        border: none;
        margin-top: 25px;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 0.9rem;
        padding: 10px;
    }
    .stop-btn:hover { color: #ff416c; }

    /* States Colors & Glows */
    /* REST (Oranje/Roze) */
    .state-rest .timer-circle { 
        box-shadow: 0 0 50px rgba(255, 75, 43, 0.6), inset 0 0 20px rgba(255, 75, 43, 0.2);
        color: #ff4b2b;
        border-color: #ff4b2b;
    }
    /* WORK (Groen/Teal) */
    .state-work .timer-circle { 
        box-shadow: 0 0 60px rgba(56, 239, 125, 0.7), inset 0 0 20px rgba(56, 239, 125, 0.3);
        color: #38ef7d;
        border-color: #38ef7d;
    }
    /* MANUAL (Blauw/Cyaan) */
    .state-manual .timer-circle { 
        box-shadow: 0 0 50px rgba(0, 198, 255, 0.6), inset 0 0 20px rgba(0, 198, 255, 0.2);
        color: #00c6ff;
        border-style: dashed;
        border-color: #00c6ff;
    }

    /* --- STATS OVERLAY --- */
    #statsScreen { 
        background: rgba(15, 12, 41, 0.95); /* Donkere glass overlay */
        backdrop-filter: blur(15px);
        z-index: 200; 
    }
    .chart-bar { background: rgba(255,255,255,0.1); height: 14px; border-radius: 7px; margin-top: 8px; overflow: hidden; }
    .chart-fill { height: 100%; background: var(--primary-grad); width: 0%; transition: width 1s ease; box-shadow: 0 0 10px rgba(0,198,255,0.5); }
</style>
    
</head>
<body>

    <div id="dashboardScreen" class="screen active">
        <header>
            <h1>Mijn Schema</h1>
            <button class="btn-icon" onclick="showStats()">üìä</button>
        </header>

        <div class="week-card">
            <div class="week-nav">
                <button class="btn-icon" onclick="changeWeek(-1)">‚Üê</button>
                <div>
                    <div class="week-title" id="weekDisplay">Week 1</div>
                    <div class="week-focus">Focus: Fundering</div>
                </div>
                <button class="btn-icon" onclick="changeWeek(1)">‚Üí</button>
            </div>
            
            <div style="margin-top: 10px;">
                <span class="check-label">WEKELIJKS DOEL (3x)</span>
                <div class="tracker-container" id="weekTracker">
                    <div class="check-circle"></div>
                    <div class="check-circle"></div>
                    <div class="check-circle"></div>
                </div>
            </div>
        </div>

        <div class="preview-box">
            <h3 style="margin-top: 0; font-size: 1.1rem; border-bottom: 2px solid #f1f5f9; padding-bottom: 10px;">
                Circuit Vandaag (3 Rondes)
            </h3>
            <div id="previewList">
                </div>
        </div>

        <div class="bottom-action-bar">
            <button class="big-start-btn" onclick="startWorkout()">START TRAINING ‚ñ∂</button>
        </div>
    </div>

    <div id="playerScreen" class="screen">
        <div style="position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.15); padding: 5px 15px; border-radius: 20px;">
            <span id="roundDisplay">Ronde 1 / 3</span>
        </div>
        
        <div style="width: 100%;">
            <div class="player-instruction" id="exName">Klaarmaken...</div>
            <div class="player-detail" id="exDetail">Start in</div>
            
            <div class="timer-circle" id="timerDisplay">8</div>
        </div>

        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; margin-top: 30px;">
            <button id="actionBtn" class="action-btn" onclick="handleAction()">Start</button>
            <button class="stop-btn" onclick="quitWorkout()">Afbreken</button>
        </div>
    </div>

    <div id="statsScreen" class="screen">
        <header>
            <h1>Statistieken</h1>
            <button class="btn-icon" onclick="closeStats()">‚úï</button>
        </header>
        <div id="statsContent">
            </div>
    </div>

<script>
    // --- DATA ---
    const exercises = [
        { id: 'plank', name: 'De Plank', type: 'time' },
        { id: 'bicycle', name: 'Bicycle Crunches', type: 'reps' },
        { id: 'legraise', name: 'Lying Leg Raises', type: 'reps' },
        { id: 'mountain', name: 'Mountain Climbers', type: 'time' },
        { id: 'twists', name: 'Russian Twists', type: 'reps' }
    ];

    const weeklyProgression = {
        1: { plank: 30, bicycle: 20, legraise: 10, mountain: 30, twists: 20 },
        2: { plank: 35, bicycle: 24, legraise: 12, mountain: 30, twists: 24 },
        3: { plank: 40, bicycle: 30, legraise: 14, mountain: 35, twists: 30 },
        4: { plank: 45, bicycle: 36, legraise: 15, mountain: 40, twists: 36 },
        5: { plank: 50, bicycle: 40, legraise: 15, mountain: 45, twists: 40 },
        6: { plank: 60, bicycle: 44, legraise: 18, mountain: 50, twists: 44 },
        7: { plank: 75, bicycle: 50, legraise: 20, mountain: 60, twists: 50 },
        8: { plank: 90, bicycle: 60, legraise: 20, mountain: 60, twists: 60 }
    };

    // --- STATE ---
    let state = {
        currentWeek: 1,
        history: [], // { date: '2023-10-01', week: 1 }
        
        // Player state
        isActive: false,
        round: 1,
        exIndex: 0,
        phase: 'idle', 
        timeLeft: 0,
        timerInterval: null
    };

    const TOTAL_ROUNDS = 3;
    const PREP_TIME = 8;
    const ROUND_REST = 30;

    // --- INIT ---
    window.onload = function() {
        const saved = localStorage.getItem('abs_pro_v2');
        if(saved) {
            const parsed = JSON.parse(saved);
            state.currentWeek = parsed.currentWeek || 1;
            state.history = parsed.history || [];
        }
        renderDashboard();
    };

    function saveData() {
        localStorage.setItem('abs_pro_v2', JSON.stringify({
            currentWeek: state.currentWeek,
            history: state.history
        }));
    }

    // --- DASHBOARD FUNCTIONS ---
    function renderDashboard() {
        document.getElementById('weekDisplay').innerText = `Week ${state.currentWeek}`;
        
        // 1. Render Preview List
        const targets = weeklyProgression[state.currentWeek];
        const list = document.getElementById('previewList');
        list.innerHTML = '';
        exercises.forEach(ex => {
            const val = targets[ex.id];
            const unit = ex.type === 'time' ? 'sec' : 'x';
            list.innerHTML += `
                <div class="preview-item">
                    <span style="font-weight:600;">${ex.name}</span>
                    <span style="color:var(--primary); font-weight:bold;">${val} ${unit}</span>
                </div>`;
        });

        // 2. Render Checkboxes (De 3 cirkels)
        const workoutsThisWeek = state.history.filter(h => h.week === state.currentWeek).length;
        const trackerContainer = document.getElementById('weekTracker');
        trackerContainer.innerHTML = '';
        
        for(let i = 0; i < 3; i++) {
            if(i < workoutsThisWeek) {
                // Gedaan -> Groen met vinkje
                trackerContainer.innerHTML += `<div class="check-circle completed">‚úì</div>`;
            } else {
                // Niet gedaan -> Leeg
                trackerContainer.innerHTML += `<div class="check-circle"></div>`;
            }
        }
    }

    function changeWeek(dir) {
        if((state.currentWeek === 1 && dir === -1) || (state.currentWeek === 8 && dir === 1)) return;
        state.currentWeek += dir;
        saveData();
        renderDashboard();
    }

    // --- PLAYER LOGIC (Zelfde als vorig, maar cleaner) ---
    function startWorkout() {
        state.isActive = true;
        state.round = 1;
        state.exIndex = 0;
        
        document.getElementById('dashboardScreen').classList.remove('active');
        document.getElementById('playerScreen').classList.add('active');
        
        // Force scroll top
        window.scrollTo(0,0);
        
        startPrep();
    }

    function quitWorkout() {
        if(confirm("Stoppen met de workout?")) {
            stopTimer();
            state.isActive = false;
            document.getElementById('playerScreen').classList.remove('active');
            document.getElementById('dashboardScreen').classList.add('active');
        }
    }

    function stopTimer() {
        if(state.timerInterval) clearInterval(state.timerInterval);
    }

    // PHASE 1: PREP
    function startPrep() {
        stopTimer();
        state.phase = 'prep';
        state.timeLeft = PREP_TIME;
        
        const currentEx = exercises[state.exIndex];
        
        // UI
        document.getElementById('playerScreen').className = 'screen active state-rest';
        document.getElementById('roundDisplay').innerText = `Ronde ${state.round} / ${TOTAL_ROUNDS}`;
        document.getElementById('exName').innerText = "Volgende: " + currentEx.name;
        document.getElementById('exDetail').innerText = "Maak je klaar...";
        document.getElementById('actionBtn').style.display = 'none';
        
        updateTimerDisplay();

        state.timerInterval = setInterval(() => {
            state.timeLeft--;
            updateTimerDisplay();
            if(state.timeLeft <= 0) startExercise();
        }, 1000);
    }

    // PHASE 2: EXERCISE
    function startExercise() {
        stopTimer();
        const currentEx = exercises[state.exIndex];
        const targets = weeklyProgression[state.currentWeek];
        const targetVal = targets[currentEx.id];

        document.getElementById('exName').innerText = currentEx.name;
        
        if (currentEx.type === 'time') {
            state.phase = 'work';
            state.timeLeft = targetVal;
            document.getElementById('playerScreen').className = 'screen active state-work';
            document.getElementById('exDetail').innerText = "HOU VOL!";
            document.getElementById('actionBtn').style.display = 'none';
            
            updateTimerDisplay();
            
            state.timerInterval = setInterval(() => {
                state.timeLeft--;
                updateTimerDisplay();
                if(state.timeLeft <= 0) nextStep();
            }, 1000);
        } else {
            state.phase = 'manual';
            document.getElementById('playerScreen').className = 'screen active state-manual';
            document.getElementById('exDetail').innerText = `Doe ${targetVal} herhalingen`;
            document.getElementById('timerDisplay').innerText = targetVal;
            document.getElementById('actionBtn').style.display = 'block';
            document.getElementById('actionBtn').innerText = "IK BEN KLAAR";
        }
    }

    function handleAction() {
        if(state.phase === 'manual') nextStep();
    }

    function nextStep() {
        stopTimer();
        
        if (state.exIndex < exercises.length - 1) {
            state.exIndex++;
            startPrep();
        } else {
            if (state.round < TOTAL_ROUNDS) {
                state.round++;
                state.exIndex = 0;
                startRoundRest();
            } else {
                finishWorkout();
            }
        }
    }

    function startRoundRest() {
        state.timeLeft = ROUND_REST;
        state.phase = 'prep';
        document.getElementById('playerScreen').className = 'screen active state-rest';
        document.getElementById('exName').innerText = "RONDE PAUZE";
        document.getElementById('exDetail').innerText = "Adem in, adem uit...";
        document.getElementById('actionBtn').style.display = 'none';
        
        state.timerInterval = setInterval(() => {
            state.timeLeft--;
            updateTimerDisplay();
            if(state.timeLeft <= 0) startExercise();
        }, 1000);
    }

    function updateTimerDisplay() {
        document.getElementById('timerDisplay').innerText = state.timeLeft;
    }

    function finishWorkout() {
        stopTimer();
        // Save stats
        state.history.push({ date: new Date().toISOString(), week: state.currentWeek });
        saveData();
        
        alert("GEFELICITEERD! Training voltooid.");
        document.getElementById('playerScreen').classList.remove('active');
        document.getElementById('dashboardScreen').classList.add('active');
        renderDashboard(); // Update circles immediately
    }

    // --- STATS LOGIC ---
    function showStats() {
        document.getElementById('dashboardScreen').classList.remove('active');
        document.getElementById('statsScreen').classList.add('active');
        renderStats();
    }

    function closeStats() {
        document.getElementById('statsScreen').classList.remove('active');
        document.getElementById('dashboardScreen').classList.add('active');
    }

    function renderStats() {
        const container = document.getElementById('statsContent');
        container.innerHTML = '';
        
        // Count workouts per week
        const counts = {};
        state.history.forEach(h => { counts[h.week] = (counts[h.week] || 0) + 1; });

        let html = '';
        for(let i=1; i<=8; i++) {
            const c = counts[i] || 0;
            const pct = Math.min(100, (c / 3) * 100);
            const color = c >= 3 ? 'var(--success)' : 'var(--primary)';
            
            html += `
                <div style="margin-bottom: 15px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                        <strong>Week ${i}</strong>
                        <span>${c} / 3</span>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-fill" style="width: ${pct}%; background: ${color}"></div>
                    </div>
                </div>
            `;
        }
        container.innerHTML = html;
    }
</script>

</body>
</html>
